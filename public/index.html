<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Text Ships</title>
<style>
html, body { -webkit-text-size-adjust: 100%; -moz-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-size-adjust: 100%; height: 100dvh;}
body {
  margin:0;
  background:#222;
  font-family: Arial, sans-serif; /* all text Arial */
  overflow:hidden;
  color: white; /* default text color */
  min-height: 100dvh;
}

/* Ships */
.ship {
  position: absolute;
  /* default desktop size */
  width: 60px;
  height: 60px;
  cursor: pointer;
  pointer-events: auto;
}

/* smaller ships on narrow / portrait / mobile views */
@media (max-width: 720px), (orientation: portrait) {
  .ship {
    width: clamp(28px, 9vw, 48px);
    height: clamp(28px, 9vw, 48px);
  }
}

@media (max-width: 520px) {
  .ship-preview { font-size: 10px !important; }
  label h1 { font-size: 0.72em !important; }
  #textInput { min-height: clamp(36px, 10vh, 120px); }
  #emailInput { min-height: 28px; }
}

.ship svg {
  filter: drop-shadow(0 0 6px rgba(255,255,255,0.5)); /* outer glow */
}

.ship polygon {
  fill: rgba(255, 255, 255, 0.029); /* soft translucent white */
  stroke: white;
  stroke-width: 1.5;
}

.ship line {
  stroke: white;
  stroke-width: 1.5;
}


/* Overlay for full text */
#overlay {
  position:fixed;
  top:0;
  left:0;
  right:0;
  bottom:0;
  display:none;
  justify-content:center;
  align-items:center;
  background:rgba(0,0,0,0.7);
  text-align:center;
  padding:20px;
  z-index:9999;
  color:white;
  font-family: Arial, sans-serif;
  font-size:2em;
}

/* Input box */
#inputBox {
  position:fixed;
  bottom:calc(10px + env(safe-area-inset-bottom));
  left:50%;
  transform:translateX(-50%);
  z-index:10000;
  font-family: Arial, sans-serif;
}

/* Video background */
#bgVideo {
  position: fixed;
  inset: 0; /* top:0; right:0; bottom:0; left:0 */
  width: 100vw;
  /* prefer dynamic viewport unit, fall back to JS-set --vh */
  height: 100dvh;
  min-height: -webkit-fill-available; /* iOS fallback */
  height: calc(var(--vh, 1vh) * 100);
  object-fit: cover;
  object-position: 50% var(--video-y, 50%); /* default center */
  bottom: calc(0px - env(safe-area-inset-bottom));
  background-color: #000; /* avoid visible gaps */
  z-index: 0;
}
@media (orientation: portrait), (max-aspect-ratio: 3/4) {
  #bgVideo {
    object-position: 50% 28%;
    transform: none;
    will-change: object-position;
  }
}

/* Input fields */
#textInput, #emailInput {
  font-family: Arial, sans-serif;
  width: clamp(200px, 70vw, 700px);
  font-size: clamp(13px, 2.2vw, 16px);
  padding: 8px 10px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.02);
  color: white;
  outline: none;
  border-radius: 10px;
  resize: none;
  overflow: auto;
  box-sizing: border-box;
  max-width: 95%;
}

@media (max-width: 480px) {
  #textInput, #emailInput, #inputBox button, label h1 {
    font-size: 16px !important;
  }
}

#textInput {
  min-height: clamp(40px, 9vh, 150px);
  max-height: 30vh;
}

#emailInput {
  min-height: clamp(28px, 5vh, 60px);
  max-height: 12vh;
  width: clamp(160px, 35vw, 420px);
  font-size: clamp(13px, 2.0vw, 15px);
  padding: 6px 10px;
  border-radius: 8px;
}

/* Button style */
#inputBox button {
  background: transparent;
  color: white;
  border: 1px solid white;
  padding: 5px 12px;
  font-family: Arial, sans-serif;
  cursor: pointer;
  border-radius: 3px;
  transition: 0.2s;
}

#inputBox button:hover {
  background: rgba(255,255,255,0.1);
}

/* Checkbox wrapper style (semi-transparent pill) */
label {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 6px 8px;
  border-radius: 8px;
  background: transparent;
  color: rgba(255,255,255,0.95);
  font-size: 14px;
  cursor: pointer;
  user-select: none;
  transition: background .18s, transform .18s;
  backdrop-filter: blur(2px);
}

/* Checkbox style */
input[type="checkbox"] {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  border-radius: 6px;                         /* slightly rounded corners */
  border: 1.6px solid rgba(255,255,255,0.14); /* same visual weight as inputs */
  background: rgba(255,255,255,0.02);         /* same subtle bg as inputs */
  display: inline-block;
  position: relative;
  cursor: pointer;
  vertical-align: middle;
  transition: background .12s, border-color .12s, transform .12s;
  box-sizing: border-box;
  padding: 0;
}

input[type="checkbox"]::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  width: 8px;
  height: 12px;
  border: solid rgba(255,255,255,0.95);
  border-width: 0 2px 2px 0;
  transform: translate(-50%, -60%) rotate(45deg) scale(0.9);
  opacity: 0;
  transition: opacity .12s, transform .12s;
}

/* checked state: slightly stronger bg and border like inputs focus */
input[type="checkbox"]:checked {
  background: rgba(255,255,255,0.06);
  border-color: rgba(255,255,255,0.28);
}
input[type="checkbox"]:checked::after {
  opacity: 1;
  transform: translate(-50%, -60%) rotate(45deg) scale(1);
}

label {
  background: transparent;
}
/* hover / active affordances */
label:hover { background: rgba(255,255,255,0.03); }
label:active { transform: translateY(1px); }

/* Checkbox label text */
label h1 {
  display: inline;
  font-size: 0.8em;
  font-weight: normal;
  color: white;
  margin: 0;
  vertical-align: middle;
}

body.admin-mode {
  outline: 2px dashed rgba(255,255,255,0.3);
}
</style>
</head>
<body>
<video id="bgVideo" autoplay muted loop playsinline crossorigin="anonymous">
  <source src="background.mp4" type="video/mp4">
  Your browser does not support HTML5 video.
</video>
<div id="overlay"></div>
<button id="bgPlayBtn" style="display:none; position: fixed; right: 12px; top: 12px; z-index:10001; background: rgba(0,0,0,0.6); color:#fff; border:none; padding:8px 12px; border-radius:6px; cursor:pointer; font-size:13px;">
  Play background
</button>

<div id="inputBox">
  <textarea id="textInput" placeholder="kirjuta oma murest" rows="1"></textarea>
  <br>
  <label>
    <input type="checkbox" id="feedbackCheckbox">
    <h1>kas soovid tagasisidet?</h1>
  </label>
  <br>
  <input type="email" id="emailInput" placeholder="sisesta oma email" style="display:none; margin-top:5px;">
  <br>
  <button onclick="sendText()">saada</button>
</div>

<!-- Socket.io -->
<script src="/socket.io/socket.io.js"></script>
<!-- Bubbles logic -->
<script src="bubbles.js"></script>
</body>
</html>
